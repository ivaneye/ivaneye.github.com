---
layout: post
title: 2016年年终总结
categories: [work]
tags: [experience,work]
avatarimg: "/img/head.jpg"
author: wangyifan
published: false

---

2016年主要做了四个项目:

- 分布式服务项目「Hydra」
- ffuse项目
- 基准测试项目「JMH」
- 参与分布式缓存项目

# 分布式服务项目「Hydra」

## 目标

-	降低使用Hydra框架开发服务的难度,提高服务开发效率
-	优化服务发布流程
-	提供完善的服务治理，方便运维
- 替换掉OSGi

## 执行情况

- [x] Hydra3整体架构设计及技术预研
- [x] Hydra3客户端设计与开发及Hydra3管理中心页面设计
- [x] Hydra3管理中心详细设计与前台编码以及Hydra3服务详细设计
- [x] Hydra3服务开发及流程优化
- [x] Hydra3联调测试及文档整理
- [ ] FPay部署Hydra3 [进行中]
- [ ] 百卓部署Hydra3 [进行中]
- [ ] Hydra2维护 [进行中]

## 成绩

- 老版Hydra暴露了过多的技术细节，目前项目组使用Hydra开发服务过于复杂，影响开发效率。复杂的主要原因是项目组开发人员需要关注OSGi的相关配置，比如模块的导入导出，且相关配置需要在运行时才会提示是否有错误！在Hydra3中，摒弃了复杂的OSGi技术，并对技术细节进行了封装，实现了本地测试、debug和远程debug功能，极大的提高了开发效率。且在部署上提高了易用性，初步得到了项目组的认可。
- 老版Hydra的发布流程与运维发布流程无法很好的结合，老版Hydra默认基于命令行的发布方式，而运维通常使用shell拷贝方式进行方法，OSGi需要通过设置优先级来判断bundle的启动顺序，运维的拷贝方式无法进行优先级设置，可能导致bundle启动顺序错乱的问题。Hydra3的部署结合UMC进行发布，实现界面操作即可完成发布流程，同时UMC提供了监控功能，能方便的对Hydra3进行服务调用、运行情况的监控与报警。
- 老版Hydra缺少完善的服务治理，老版Hydra只有服务查看功能，而没有治理功能。Hydra3提供了完善的服务治理功能，包括服务升降级、客户端管理、服务端管理、权重管理、执行队列管理等功能。

## 问题

1. 设计阶段缺少对实际使用情况的考虑，在后续实际使用过程中，又针对项目组反馈的问题做了调整
2. Hydra3使用了Spring，对版本没有做隔离，项目组Spring版本只能跟Hydra3走，限制了一部分的灵活性
3. 项目开发完成后，推广使用有较长的空档期

# ffuse项目

## 目标

实现日志信息能自动推送到消息队列中，将「拉日志」改成「推日志」！

## 执行情况

- [x] 完成ffuse的架构设计
- [x] 完成ffuse的代码开发
- [ ] ffuse整体功能测试
- [ ] ffuse整体性能测试
- [ ] ffuse打包部署

## 成绩

目前日志分析平台通过tail的方式将日志写到消息队列中！而tail可能会失败，当失败后没有很好的恢复机制，导致最终消费端日志与实际日志不同步！使用ffuse通过用户空间的文件系统来替代tail的方式，当应用向文件中写日志时，自动触发推送消息队列功能，将日志信息自动推送到消息队列中！当消息队列出现问题时，可暂时将日志信息缓存，待消息队列恢复后，自动再将日志信息推送过去。保证本地日志信息与消费端日志信息同步！

## 问题

- 在开发层面，ffuse使用C语言开发，学习、开发、调试都花了较多的时间

# JMH项目

## 目标

提供部门使用的公共的、便利的基准测试平台！

## 执行情况

- [x] 完成基准测试平台的架构设计
- [ ] 完成基准测试平台的原型及流程设计
- [ ] 搭建开发框架
- [ ] 完成基准测试平台的开发
- [ ] 完成基准测试平台的测试
- [ ] 完成基准测试平台的部署

## 成绩

基于Hydra3开发，直接复用Hydra3的节点功能，节省服务端的开发

# 缓存项目

## 目标

提供公用的缓存平台！

## 执行情况

- [x] 梳理现有分布式缓存(Codis)的实现

# 个人成长与不足

2016年主要锻炼自己架构能力！通过分布式服务框架Hydra、ffuse以及基准测试框架JMH架构设计的锻炼，架构能力有了一定程度的提升，也对架构设计有了新的认识！

架构设计是在限定的上下文下，做出最适合的决策的过程，决策的结果就是一个个的子系统、组件及接口！与「程序员思维」不同的是，对于某个问题，「程序员思维」选择的是最短路径！架构设计选择的是最优路径！

演讲方面，经过五年的锻炼，对内部分享、培训等场合已经没什么大问题了！今年参加了公司的技术大会！整个体验和内部分享和培训完全不同，这方面的经验还很不足，需要进一步的学习与练习！
