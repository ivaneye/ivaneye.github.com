---
layout: post
date: 2017-01-13
title: 魔兽中的关键路径
categories: [think]
tags: [experience,think,随笔]
avatarimg: "/img/head.jpg"
author: wangyifan

---

扯这个话题的原因是，上周部门有一个关于「关键路径」的分享，个人觉得「关键路径」这玩样比较鸡肋！这里做个复盘，确认一下是否确实是个鸡肋～

这里通过魔兽争霸里的人族来展开！

为什么是魔兽争霸呢？因为我好久不玩游戏了，现在游戏都是90后、00后的天下了，我这种80后的老人就不掺和了！魔兽争霸是我在大学里玩得最多的游戏，也是80后很熟悉的一款游戏了！至少能引起80后的共鸣！

那为什么是人族呢？因为在魔兽争霸里的四个种族里，人族有两项其它种族都不具备的技能！第一、农民可以变民兵！第二、多个农民可以同时建造一个建筑物。这更贴合我们的现实生活！

# 什么是关键路径

我们先来说说什么是「关键路径」！一堆无聊的概念，没兴趣的可直接忽略～

这是BusinessDictionary里的一段解释：

> Longest sequence of activities in a project plan which must be completed on time for the project to complete on due date. An activity on the critical path cannot be started until its predecessor activity is complete; if it is delayed for a day, the entire project will be delayed for a day unless the activity following the delayed activity is completed a day earlier.

简单翻译一下：

> 对于一个需要在特定时间内完成的项目，针对这个项目所制定的计划里，耗时最长的那个「活动序列」就称为是关键路径。在关键路径中的「活动」不能在它的前导「活动」结束前开始；如果一个活动延误了一天，则整个项目将会延误一天，除非后续的活动提前一天完成，来抵消这一天的延误

一个项目可以有多个，并行的关键路径。另一个总工期比关键路径的总工期略少的一条并行路径被称为**次关键路径**。

关键路线是一个动态系统，它会随着项目的进展不断更新，其采用单一时间估计法，其中**时间被视为一定的或确定的**。

在关键路径中，一般有以下一些时间参数：

- **最早开始时间（Early Start）**：活动最早开始时间由所有前置活动中最后一个最早结束时间确定。
- **最早结束时间（Early Finish）**：活动的最早结束时间由活动的最早开始时间加上其工期确定。
- **最迟结束时间（Late Finish）**：一个活动在不耽误整个项目的结束时间的情况下能够最迟结束的时间。它等于所有紧后工作中最早的一个最迟开始时间。
- **最迟开始时间（Late Start）**：一个活动在不耽误整个项目的结束时间的情况下能够最迟开始的时间。它等于活动的最迟结束时间减去活动的工期。
- **总时差（Total Float) **：指一项活动在不影响整体计划工期的情况下最大的浮动时间。
- **自由时差（Free Float）**：指活动在不影响其紧后工作的最早开始时间的情况下可以浮动的时间。

其实举个简单的例子就可以解释上面的概念了！

# 统筹方法

以前学过一篇叫统筹方法的文章，我印象非常深刻！因为我当时算错了！！！

大概问题是这样的：“烧水泡茶"有五道工序：

1. 烧开水
2. 洗茶壶
3. 洗茶杯
4. 拿茶叶
5. 泡茶

烧开水、洗茶壶、洗茶杯，拿茶叶是泡茶的前提。

各道工序用时表： 烧开水 15分钟， 洗茶壶 2分钟， 洗茶杯 1钟分， 拿茶叶 1分钟， 泡茶 1分钟，如何以最快的速度烧水泡茶？

正常人都知道：

- 先烧水
- 烧水过程中，洗刷茶具，拿茶叶
- 水烧开后沏茶

![](/assets/think/critialpath/path2.png)

以这个流程来看，如果我们想中午12点开始烧水泡茶，那么烧水的「最早开始时间」需要是12点，「最早结束时间」 是12点一刻！另一条现上，洗茶壶的「最早开始时间」是12点，「最早结束时间」 是12点1分；洗茶杯的「最早开始时间」是12点1分，「最早结束时间」 是12点2分；拿茶叶的「最早开始时间」 是12点2分，「最早结束时间」 是12点3分！而泡茶的「最早开始时间」是12点一刻(必须要等水少好)，「最早结束时间」 是12点16分；喝到茶的「最早开始时间」是12点16分！

再反过来推，如果要在12点16分能喝到茶！也就是说喝茶的「最晚开始时间」是12点16分！那么泡茶的「最晚开始时间」是12点15分，「最晚结束时间」 是12点16分；烧水「最晚开始时间」是12点，「最晚结束烧水** 时间是12点15分；拿茶叶的「最晚开始时间」是12点14分，拿茶叶「最晚结束时间」是12点15分；洗茶杯的「最晚开始时间」是12点13分，洗茶杯「最晚结束时间」是12点14分；洗茶壶的「最晚开始时间」是12点12分，洗茶壶「最晚结束时间」是12点13分；

可以看出，烧水和泡茶的「最早开始时间与最晚开始时间、最早结束时间与最晚结束时间是相同的」，也就是说烧水和泡茶是不能有偏差的！这条路径确定了泡茶的最终所耗时间，这条路径就是「关键路径」！

而洗茶壶、洗茶杯，拿茶叶的「最早开始时间与最晚开始时间、最早结束时间与最晚结束时间是不同的」！这条路径不决定最终的泡茶时间，所以是非关键路径！其中的12分钟的偏差就是「总时差」！而洗茶壶的「自由时差」是12分钟、洗茶杯的「自由时差」是11分钟、那茶叶的「自由时差」是10分钟！

到这里都没什么问题，问题在下面，我们举个复杂的例子！

# 人族「万金油」

魔兽争霸的人族里有个著名的「万金油」组合，大致组合如下：

- 大法
- 山丘之王
- 三个步兵
- 五个火枪
- 三个女巫
- 一个男巫

我们假设有5个农民，金钱和木材无限，如何能最快的训练出万金油阵型！

首先我们来看下限制条件：

- 初始有5个农民、一个农场和城镇大厅。虽然金钱和木材无限，但是农民不能超过5个！
- 要出英雄需要造祭坛，祭坛建造时间为60秒，训练英雄时间为55秒
- 在城镇大厅升级到主城之前，不能出第二英雄「山丘之王」，城镇大厅升级到主城需要140秒
- 要训练步兵需要建造兵营，兵营建造时间为60秒，步兵训练时间为20秒
- 要训练火枪手，除了兵营还需要铁匠铺，建造铁匠铺需要70秒，训练火枪手为26秒
- 要出女巫和男巫需要神秘圣地，而建造神秘圣地需要先升级到主城，神秘圣地需要70秒的建造时间，女巫需要30秒的训练时间，男巫需要28秒的训练时间
- 要造人，需要建造农场，一个农场可以支持训练十个人口。其中英雄占5个人口，士兵2个人口，火枪手3个人口，女巫2个人口，男巫2个人口，农民一个人口！所以总人口为:5 * 1 + 2 * 5 + 3 * 2 + 5 * 3 + 3 * 2 + 1 * 2 = 44人口，出去初始的那个农场，需要再建造4个农场。建造一个农场需要35秒
- 所有建造时间均为单个农民建造时间，n个农民建造时间为t/n

是不是看晕了？我很贴心的画了一张图：

![](/assets/think/critialpath/path.png)

- 实线表示先后顺序
- 虚线为必要条件，表示所指向的目标需要执行时，除了要在实线初始端的目标之后执行外，还需要在虚线初始端的目标之后执行

# 关键路径法打造「万金油」

我们来看看使用关键路径法来打造「万金油」！


关键路径的基本问题：
1、  什么是关键路径？
只有项目网络中最长的或耗时最多的活动完成之后，项目才能结束，这条最长的活动路线就叫关键路径（Critical Path）
2、  关键路径可以超过一条吗？
可以，可以有两条甚至以上。
3、  关键路径是一成不变的吗？
不是，在进度计划的优化或项目实施过程中，关键路径可能发生变化。
4、  关键路径越多，对项目意味着什么？
关键路径越多，项目的风险越大，就越难管理。
5、  关键路径上可以有虚活动吗？
可以（在箭线法中）。
6、  会出现负浮动时间吗？
会，如果关键路径上的活动被延误了，或者管理层要求比原定日期提前完工。
7、  出现负浮动时间时，怎么办？
负浮动时间必须尽快加以解决，可以进行赶工、快速跟进等。

# 关键路径举例

# 关键路径悖论

## 估算误差

## 最终都是关键路径
