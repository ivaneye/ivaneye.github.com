<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>思考，执行，表达！</title><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/5.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/grids-responsive-min.css"><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.1.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">思考，执行，表达！</h1><a id="logo" href="/.">思考，执行，表达！</a><p class="description"></p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h2 class="post-title"><a href="/2013/09/20/request_types.html">Luminus手册-请求</a></h2><div class="post-meta">2013-09-20</div><a data-thread-key="2013/09/20/request_types.html" href="/2013/09/20/request_types.html#comments" class="ds-thread-count"></a><div class="post-content"><h1 id="Requests"><a href="#Requests" class="headerlink" title="Requests"></a>Requests</h1><p>默认情况下，请求的参数(比如一个form的POST请求)将会被自动绑定到request的:params键上。</p></div><p class="readmore"><a href="/2013/09/20/request_types.html">阅读更多</a></p></div><div class="post"><h2 class="post-title"><a href="/2013/09/19/staticresource.html">Luminus手册-静态资源</a></h2><div class="post-meta">2013-09-19</div><a data-thread-key="2013/09/19/staticresource.html" href="/2013/09/19/staticresource.html#comments" class="ds-thread-count"></a><div class="post-content"><h1 id="Static-resources"><a href="#Static-resources" class="headerlink" title="Static resources"></a>Static resources</h1><p>在noir.io下有多个访问静态资源的帮助方法。<br>你可以通过调用resource-path来获取public目录的路径。</p>
<h1 id="Handling-file-uploads"><a href="#Handling-file-uploads" class="headerlink" title="Handling file uploads"></a>Handling file uploads</h1><p>上传文件通过noir.io空间下的upload-file方法来实现，upload-file接受一个路径和文件的map。<br>例如我们有一个upload.html文件:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>Upload a file<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"/upload"</span> <span class="attr">enctype</span>=<span class="string">"multipart/form-data"</span> <span class="attr">method</span>=<span class="string">"POST"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"file"</span> <span class="attr">name</span>=<span class="string">"file"</span> <span class="attr">type</span>=<span class="string">"file"</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"upload"</span> /&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></div></pre></td></tr></table></figure>
<p>我们可以这样来处理文件上传。</p>
<figure class="highlight clojure"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">(<span class="name"><span class="builtin-name">ns</span></span> myapp.upload</div><div class="line">  ...</div><div class="line">  (<span class="symbol">:require</span> [upload-test.views.layout <span class="symbol">:as</span> layout]</div><div class="line">            [noir.response <span class="symbol">:as</span> response]</div><div class="line">            [noir.io <span class="symbol">:as</span> io]))</div><div class="line"></div><div class="line">(<span class="name"><span class="builtin-name">defn</span></span> upload-page []</div><div class="line">  (<span class="name">layout/render</span> <span class="string">"upload.html"</span>))</div><div class="line"></div><div class="line">(<span class="name"><span class="builtin-name">defn</span></span> handle-upload [file]</div><div class="line">  (<span class="name">io/upload-file</span> <span class="string">"/"</span> file)</div><div class="line">  (<span class="name">response/redirect</span></div><div class="line">    (<span class="name"><span class="builtin-name">str</span></span> <span class="string">"/"</span> (<span class="symbol">:filename</span> file))))</div><div class="line"></div><div class="line">(<span class="name">defroutes</span> upload-routes</div><div class="line">  (<span class="name">GET</span> <span class="string">"/upload"</span> [] (<span class="name">upload-page</span>))</div><div class="line">  (<span class="name">POST</span> <span class="string">"/upload"</span> [file] (<span class="name">handle-upload</span> file)))</div></pre></td></tr></table></figure></div><p class="readmore"><a href="/2013/09/19/staticresource.html">阅读更多</a></p></div><div class="post"><h2 class="post-title"><a href="/2013/09/18/defining_routes.html">Luminus手册-路由定义</a></h2><div class="post-meta">2013-09-18</div><a data-thread-key="2013/09/18/defining_routes.html" href="/2013/09/18/defining_routes.html#comments" class="ds-thread-count"></a><div class="post-content"><h1 id="Defining-routes"><a href="#Defining-routes" class="headerlink" title="Defining routes"></a>Defining routes</h1><p>Luminus使用Compojure来定义应用的路由.路由由HTTP请求方法和接受它的URI，<br>参数和以及相应的处理程序组成。Compojure定义了所有标准HTTP请求的路由，<br>比如ANY,DELETE,GET,HEAD,OPTIONS,PATCH,POST和PUT。</p>
<p>例如：如果我们想定义一个应用，它指向/，/返回”Hello World!”字符串。我们<br>可以这样写:</p>
<figure class="highlight clojure"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">(<span class="name">defroutes</span> app-routes</div><div class="line">  (<span class="name">GET</span> <span class="string">"/"</span> [] <span class="string">"Hello World!"</span>))</div></pre></td></tr></table></figure>
<p>如果你想构建一个路由来响应POST请求，我们可以这样写：</p>
<figure class="highlight clojure"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">(<span class="name">POST</span> <span class="string">"/hello"</span> [id] (<span class="name"><span class="builtin-name">str</span></span> <span class="string">"Welcome "</span> id))</div></pre></td></tr></table></figure>
<p>有些路由需要访问请求的map，我们只需要在路由上定义第二个参数就可以了。</p>
<figure class="highlight clojure"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">(<span class="name">GET</span> <span class="string">"/foo"</span> request (<span class="name">interpose</span> <span class="string">", "</span> (<span class="name"><span class="builtin-name">keys</span></span> request)))</div></pre></td></tr></table></figure>
<p>上面的路由读出请求map中所有的key并展示出来。结果如下:</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">:ssl-client-cert, :remote-addr, :scheme, :query-params, :session, :form-params,</div><div class="line">:multipart-params, :request-method, :query-string, :route-params, :content-type,</div><div class="line">:cookies, :uri, :server-name, :params, :headers, :content-length, :server-port,</div><div class="line">:character-encoding, :body, :flash</div></pre></td></tr></table></figure>
<p>Compojure还提供了一些有用的函数来处理请求map和表单参数。例如，在<br>guestbook应用的例子中，我们看到了如下的路由定义:</p>
<figure class="highlight clojure"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">(<span class="name">POST</span> <span class="string">"/"</span>  [name message] (<span class="name">save-message</span> name message))</div></pre></td></tr></table></figure></div><p class="readmore"><a href="/2013/09/18/defining_routes.html">阅读更多</a></p></div><div class="post"><h2 class="post-title"><a href="/2013/09/17/clojurescript.html">Luminus手册-ClojureScript</a></h2><div class="post-meta">2013-09-17</div><a data-thread-key="2013/09/17/clojurescript.html" href="/2013/09/17/clojurescript.html#comments" class="ds-thread-count"></a><div class="post-content"><h1 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h1><p>ClojureScript可以作为JavaScript在客户端的替代品。使用ClojureScript可以<br>有如下有点：</p>
<ul>
<li>在客户端和服务端使用相同的语言</li>
<li>在前后端共用相同的代码</li>
<li>简介流畅的语言</li>
<li>使用Leiningen管理依赖关系</li>
<li>不可变数据</li>
<li>功能强大的库</li>
<li>Adding ClojureScript Support</li>
</ul>
<p>最简单的添加ClojureScript支持的方法就是在创建新项目的时候添加+cljs选项<br>。不过在现有的项目中添加ClojureScript也同样的简单。你只需要在<br>project.clj文件中添加如下内容即可。</p>
<figure class="highlight clojure"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">:plugins</span> [...</div><div class="line">          [lein-cljsbuild <span class="string">"0.3.0"</span>]]</div><div class="line"></div><div class="line"><span class="symbol">:hooks</span> [... leiningen.cljsbuild]</div><div class="line"></div><div class="line"><span class="symbol">:cljsbuild</span></div><div class="line">&#123;<span class="symbol">:builds</span> [&#123;<span class="symbol">:source-paths</span> [<span class="string">"src-cljs"</span>]</div><div class="line">           <span class="symbol">:compiler</span> &#123;<span class="symbol">:output-to</span> <span class="string">"resources/public/js/site.js"</span></div><div class="line">                      <span class="symbol">:optimizations</span> <span class="symbol">:advanced</span>&#125;&#125;]&#125;</div></pre></td></tr></table></figure>
<p>上面的代码将在项目中添加cljsbuild插件和一个钩子。<br>所有的命名空间需要在项目根目录下的src-cljs目录内。注意，ClojureScript<br>文件需要以.cljs结尾。如果文件以.clj结尾，它也会被编译，不过它就无法访<br>问js命名空间。</p>
<h1 id="Using-Libraries"><a href="#Using-Libraries" class="headerlink" title="Using Libraries"></a>Using Libraries</h1><p>使用ClojureScript的一个好处就是你可以使用Leiningen来管理客户端的依赖。<br>ClojureScript库和其他库一样都配置在project.clj文件中。</p></div><p class="readmore"><a href="/2013/09/17/clojurescript.html">阅读更多</a></p></div><div class="post"><h2 class="post-title"><a href="/2013/09/16/html_templating.html">Luminus手册-HTML模板</a></h2><div class="post-meta">2013-09-16</div><a data-thread-key="2013/09/16/html_templating.html" href="/2013/09/16/html_templating.html#comments" class="ds-thread-count"></a><div class="post-content"><h1 id="Templating-Options"><a href="#Templating-Options" class="headerlink" title="Templating Options"></a>Templating Options</h1><p>Luminus包含了Hiccup的依赖.如果你熟悉Hiccup那么可以直接使用。<br>Hiccup使用clojure数据结构来描述模板。并且,Hiccup提供了丰富的API来生成<br>HTML元素。 Luminus也包含了Selmer，Selmer使用了普通的文本文件来描述模板。<br>你可以使用它们中的任何一个模板，或者混合使用.抑或你可以选择任何你喜欢<br>的模板框架，比如Enlive或者Stencil。</p>
<h1 id="HTML-Templating-Using-Selmer"><a href="#HTML-Templating-Using-Selmer" class="headerlink" title="HTML Templating Using Selmer"></a>HTML Templating Using Selmer</h1><p>Selmer是一个类似Django模板的框架。如果你熟悉Django或者其他类似的模板语<br>言，那么你会感觉很熟悉.</p>
<h2 id="Creating-Templates"><a href="#Creating-Templates" class="headerlink" title="Creating Templates"></a>Creating Templates</h2><p>Selmer将展示逻辑和程序逻辑分开。实际上Selmer模板就是包含了动态元素的<br>HTML文件。来看下面的例子。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"Content-Type"</span> <span class="attr">content</span>=<span class="string">"text/html; charset=UTF-8"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>My First Template<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>Hello &#123; &#123;name&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<p>模板使用了一个包含了键值对的上下文环境。上下文环境中包含了我们<br>需要在运行时获得的变量的值。上面的代码中，我们从上下文环境中获取名字为<br>name的变量的值。<br>有两个函数可以渲染模板,render和render-file。render函数接收一个字符串来<br>渲染模板。而render-file接收一个字符串作为路径来渲染模板。<br>如果我们将上面的模板定义保存到index.html文件中。我们就可以这样来渲染:</p>
<figure class="highlight clojure"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">(<span class="name"><span class="builtin-name">ns</span></span> example.routes.home</div><div class="line">  (<span class="symbol">:use</span> [selmer.parser <span class="symbol">:only</span> [render-file]]))</div><div class="line"></div><div class="line">(<span class="name"><span class="builtin-name">defn</span></span> index [request]</div><div class="line">  (<span class="name">render-file</span> <span class="string">"example/views/templates/index.html"</span></div><div class="line">               &#123;<span class="symbol">:name</span> <span class="string">"John"</span>&#125;))</div></pre></td></tr></table></figure></div><p class="readmore"><a href="/2013/09/16/html_templating.html">阅读更多</a></p></div><div class="post"><h2 class="post-title"><a href="/2013/09/15/application_profile.html">Luminus手册-应用配置</a></h2><div class="post-meta">2013-09-15</div><a data-thread-key="2013/09/15/application_profile.html" href="/2013/09/15/application_profile.html#comments" class="ds-thread-count"></a><div class="post-content"><h1 id="Profiles"><a href="#Profiles" class="headerlink" title="Profiles"></a>Profiles</h1><p>使用lein new luminus myapp命令会创建一个新的luminus应用，它使用的是默认的配置。如果你想使用其他的特性，你可以修改相应的配置参数。</p>
<p>下面就是各个配置：</p>
<ul>
<li>+cljs - 添加ClojureScript支持</li>
<li>+cucumber - 提供通过clj-webdriver配置cucumber</li>
<li>+h2 - 添加models.db并提供H2数据库依赖</li>
<li>+postgres - 添加models.db并提供PostreSQL数据库依赖</li>
<li>+mysql - 添加models.db并提供mysql依赖</li>
<li>+mongodb - 添加db.core并提供MongoDB依赖</li>
<li>+site - 创建一个包含注册和验证框架的应用。使用bootstrap和h2</li>
<li>+dailycred -<br>添加dailycred支持，当和+site参数配合使用时，它使用dailycred作为验证框架</li>
<li>+http-kit - 添加HTTP Kit支持</li>
</ul>
<p>要添加配置，只需要简单的添加到你的应用的名字后面，比如:</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">lein new luminus myapp +cljs</div></pre></td></tr></table></figure>
<p>可以多个参数一起使用:</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">lein new luminus myapp +site +postgres</div></pre></td></tr></table></figure>
<p>如果两个参数会生成相同的文件，则后面参数所生成的文件会覆盖前面参数所生<br>成的文件。</p></div><p class="readmore"><a href="/2013/09/15/application_profile.html">阅读更多</a></p></div><div class="post"><h2 class="post-title"><a href="/2013/09/14/your_first_application.html">Luminus手册-第一个应用</a></h2><div class="post-meta">2013-09-14</div><a data-thread-key="2013/09/14/your_first_application.html" href="/2013/09/14/your_first_application.html#comments" class="ds-thread-count"></a><div class="post-content"><h1 id="Guestbook应用"><a href="#Guestbook应用" class="headerlink" title="Guestbook应用"></a>Guestbook应用</h1><p>此文使用Luminus构建一个简单的guestbook应用。guestbook可以保存信息，展示信息。此应用将涉及到简单的HTML模板，数据库访问和项目结构.</p>
<h1 id="安装Leiningen"><a href="#安装Leiningen" class="headerlink" title="安装Leiningen"></a>安装Leiningen</h1><p>首先你需要安装Leiningen才能使用Luminus。安装Leiningen非常的简单:</p>
<ul>
<li>下载脚本</li>
<li>将其设置为可执行权限(chmod +x lein)</li>
<li>将脚本放到你的PATH下面</li>
<li>运行lein self-install ，然后等待安装结束</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">wget https://raw.github.com/technomancy/leiningen/stable/bin/lein</div><div class="line">chmod +x lein</div><div class="line">mv lein ~/bin</div><div class="line">lein self-install</div></pre></td></tr></table></figure>
<h1 id="创建一个新应用"><a href="#创建一个新应用" class="headerlink" title="创建一个新应用"></a>创建一个新应用</h1><p>安装完Leiningen后，你就可以在命令行中输入如下的命令</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">lein new luminus guestbook +h2</div><div class="line"><span class="built_in">cd</span> guestbook</div></pre></td></tr></table></figure>
<p>上面的命令将会创建一个使用了H2嵌入式数据库的模板项目。</p></div><p class="readmore"><a href="/2013/09/14/your_first_application.html">阅读更多</a></p></div><div class="post"><h2 class="post-title"><a href="/2013/03/17/scala_exercises_15.html">快学Scala习题解答—第十五章 注解</a></h2><div class="post-meta">2013-03-17</div><a data-thread-key="2013/03/17/scala_exercises_15.html" href="/2013/03/17/scala_exercises_15.html#comments" class="ds-thread-count"></a><div class="post-content"><h1 id="注解"><a href="#注解" class="headerlink" title="注解"></a>注解</h1><h2 id="编写四个JUnit测试用例，分别使用带或不带某个参数的-Test注解。用JUnit执行这些测试"><a href="#编写四个JUnit测试用例，分别使用带或不带某个参数的-Test注解。用JUnit执行这些测试" class="headerlink" title="编写四个JUnit测试用例，分别使用带或不带某个参数的@Test注解。用JUnit执行这些测试"></a>编写四个JUnit测试用例，分别使用带或不带某个参数的@Test注解。用JUnit执行这些测试</h2><figure class="highlight scala"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> org.junit.<span class="type">Test</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ScalaTest</span> </span>&#123;</div><div class="line"></div><div class="line">  <span class="meta">@Test</span></div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">test1</span></span>()&#123;</div><div class="line">    print(<span class="string">"test1"</span>)</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="meta">@Test</span>(timeout = <span class="number">1</span>L)</div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">test2</span></span>()&#123;</div><div class="line">    print(<span class="string">"test2"</span>)</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="创建一个类的示例，展示注解可以出现的所有位置。用-deprecated作为你的示例注解。"><a href="#创建一个类的示例，展示注解可以出现的所有位置。用-deprecated作为你的示例注解。" class="headerlink" title="创建一个类的示例，展示注解可以出现的所有位置。用@deprecated作为你的示例注解。"></a>创建一个类的示例，展示注解可以出现的所有位置。用@deprecated作为你的示例注解。</h2><figure class="highlight scala"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@deprecated</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Test</span></span>&#123;</div><div class="line"></div><div class="line">  <span class="meta">@deprecated</span></div><div class="line">  <span class="keyword">val</span> t = _;</div><div class="line"></div><div class="line">  <span class="meta">@deprecated</span>(message = <span class="string">"unuse"</span>)</div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">hello</span></span>()&#123;</div><div class="line">    println(<span class="string">"hello"</span>)</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="meta">@deprecated</span></div><div class="line"><span class="class"><span class="keyword">object</span> <span class="title">Test</span> <span class="keyword">extends</span> <span class="title">App</span></span>&#123;</div><div class="line">  <span class="keyword">val</span> t = <span class="keyword">new</span> <span class="type">Test</span>()</div><div class="line">  t.hello()</div><div class="line">  t.t</div><div class="line">&#125;</div></pre></td></tr></table></figure></div><p class="readmore"><a href="/2013/03/17/scala_exercises_15.html">阅读更多</a></p></div><div class="post"><h2 class="post-title"><a href="/2013/03/16/scala_exercises_14.html">快学Scala习题解答—第十四章 模式匹配和样例类</a></h2><div class="post-meta">2013-03-16</div><a data-thread-key="2013/03/16/scala_exercises_14.html" href="/2013/03/16/scala_exercises_14.html#comments" class="ds-thread-count"></a><div class="post-content"><h1 id="模式匹配和样例类"><a href="#模式匹配和样例类" class="headerlink" title="模式匹配和样例类"></a>模式匹配和样例类</h1><h2 id="JDK发行包有一个src-zip文件包含了JDK的大多数源代码。解压并搜索样例标签-用正则表达式case-。然后查找以-开头并包含-Ff-alls-thr的注释，捕获类似-Falls-through或-just-fall-thru这样的注释。假定JDK的程序员们遵守Java编码习惯，在该写注释的地方写下了这些注释，有多少百分比的样例是会掉入到下一个分支的？"><a href="#JDK发行包有一个src-zip文件包含了JDK的大多数源代码。解压并搜索样例标签-用正则表达式case-。然后查找以-开头并包含-Ff-alls-thr的注释，捕获类似-Falls-through或-just-fall-thru这样的注释。假定JDK的程序员们遵守Java编码习惯，在该写注释的地方写下了这些注释，有多少百分比的样例是会掉入到下一个分支的？" class="headerlink" title="JDK发行包有一个src.zip文件包含了JDK的大多数源代码。解压并搜索样例标签(用正则表达式case [\^:]+:)。然后查找以//开头并包含[Ff]alls?thr的注释，捕获类似// Falls through或// just fall thru这样的注释。假定JDK的程序员们遵守Java编码习惯，在该写注释的地方写下了这些注释，有多少百分比的样例是会掉入到下一个分支的？"></a>JDK发行包有一个src.zip文件包含了JDK的大多数源代码。解压并搜索样例标签(用正则表达式case [\^:]+:)。然后查找以//开头并包含[Ff]alls?thr的注释，捕获类似// Falls through或// just fall thru这样的注释。假定JDK的程序员们遵守Java编码习惯，在该写注释的地方写下了这些注释，有多少百分比的样例是会掉入到下一个分支的？</h2><p>没读懂题意。。。。</p>
<h2 id="利用模式匹配，编写一个swap函数，接受一个整数的对偶，返回对偶的两个组成部件互换位置的新对偶"><a href="#利用模式匹配，编写一个swap函数，接受一个整数的对偶，返回对偶的两个组成部件互换位置的新对偶" class="headerlink" title="利用模式匹配，编写一个swap函数，接受一个整数的对偶，返回对偶的两个组成部件互换位置的新对偶"></a>利用模式匹配，编写一个swap函数，接受一个整数的对偶，返回对偶的两个组成部件互换位置的新对偶</h2><figure class="highlight scala"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">swap</span></span>[<span class="type">S</span>,<span class="type">T</span>](tup: (<span class="type">S</span>,<span class="type">T</span>)) = &#123;</div><div class="line">    tup <span class="keyword">match</span> &#123;</div><div class="line">        <span class="keyword">case</span> (a ,b) =&gt; (b,a)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">println(swap[<span class="type">String</span>,<span class="type">Int</span>]((<span class="string">"1"</span>,<span class="number">2</span>)))</div></pre></td></tr></table></figure>
<h2 id="利用模式匹配，编写一个swap函数，交换数组中的前两个元素的位置，前提条件是数组长度至少为2"><a href="#利用模式匹配，编写一个swap函数，交换数组中的前两个元素的位置，前提条件是数组长度至少为2" class="headerlink" title="利用模式匹配，编写一个swap函数，交换数组中的前两个元素的位置，前提条件是数组长度至少为2"></a>利用模式匹配，编写一个swap函数，交换数组中的前两个元素的位置，前提条件是数组长度至少为2</h2><figure class="highlight scala"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">swap</span></span>(arr: <span class="type">Array</span>[<span class="type">String</span>]) = &#123;</div><div class="line">  arr <span class="keyword">match</span> &#123;</div><div class="line">    <span class="keyword">case</span> <span class="type">Array</span>(a,b, ar @ _*) =&gt; <span class="type">Array</span>(b,a) ++ ar</div><div class="line">    <span class="keyword">case</span> _ =&gt; arr</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">println(swap(<span class="type">Array</span>(<span class="string">"1"</span>,<span class="string">"2"</span>,<span class="string">"3"</span>,<span class="string">"4"</span>)).mkString)</div></pre></td></tr></table></figure></div><p class="readmore"><a href="/2013/03/16/scala_exercises_14.html">阅读更多</a></p></div><div class="post"><h2 class="post-title"><a href="/2013/03/15/scala_exercises_13.html">快学Scala习题解答—第十三章 集合</a></h2><div class="post-meta">2013-03-15</div><a data-thread-key="2013/03/15/scala_exercises_13.html" href="/2013/03/15/scala_exercises_13.html#comments" class="ds-thread-count"></a><div class="post-content"><h1 id="集合"><a href="#集合" class="headerlink" title="集合"></a>集合</h1><h2 id="编写一个函数，给定字符串，产出一个包含所有字符的下标的映射。举例来说：indexes-“Mississippi”-应返回一个映射，让’M’对应集-0-，’i’对应集-1-4-7-10-，依此类推。使用字符到可变集的映射。另外，你如何保证集是经过排序的？"><a href="#编写一个函数，给定字符串，产出一个包含所有字符的下标的映射。举例来说：indexes-“Mississippi”-应返回一个映射，让’M’对应集-0-，’i’对应集-1-4-7-10-，依此类推。使用字符到可变集的映射。另外，你如何保证集是经过排序的？" class="headerlink" title="编写一个函数，给定字符串，产出一个包含所有字符的下标的映射。举例来说：indexes(“Mississippi”)应返回一个映射，让’M’对应集{0}，’i’对应集{1,4,7,10}，依此类推。使用字符到可变集的映射。另外，你如何保证集是经过排序的？"></a>编写一个函数，给定字符串，产出一个包含所有字符的下标的映射。举例来说：indexes(“Mississippi”)应返回一个映射，让’M’对应集{0}，’i’对应集{1,4,7,10}，依此类推。使用字符到可变集的映射。另外，你如何保证集是经过排序的？</h2><p>更新scala到版本2.10.0。有可变的可排序的Set，实际上还是TreeSet</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> collection.mutable.&#123;<span class="type">Map</span>,<span class="type">HashMap</span>,<span class="type">SortedSet</span>&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">indexs</span></span>(str:<span class="type">String</span>):<span class="type">Map</span>[<span class="type">Char</span>,<span class="type">SortedSet</span>[<span class="type">Int</span>]]=&#123;</div><div class="line">  <span class="keyword">var</span> map = <span class="keyword">new</span> <span class="type">HashMap</span>[<span class="type">Char</span>, <span class="type">SortedSet</span>[<span class="type">Int</span>]]();</div><div class="line">  <span class="keyword">var</span> i = <span class="number">0</span>;</div><div class="line">  str.foreach&#123;</div><div class="line">    c=&gt;</div><div class="line">      map.get(c) <span class="keyword">match</span>&#123;</div><div class="line">        <span class="keyword">case</span> <span class="type">Some</span>(result) =&gt; map(c) = result + i</div><div class="line">        <span class="keyword">case</span> <span class="type">None</span> =&gt; map += (c-&gt; <span class="type">SortedSet</span>&#123;i&#125;)</div><div class="line">      &#125;</div><div class="line">      i += <span class="number">1</span></div><div class="line">  &#125;</div><div class="line">  map</div><div class="line">&#125;</div><div class="line"></div><div class="line">println(indexs(<span class="string">"Mississippi"</span>))</div></pre></td></tr></table></figure>
<h2 id="重复前一个练习，这次用字符到列表的不可变映射。"><a href="#重复前一个练习，这次用字符到列表的不可变映射。" class="headerlink" title="重复前一个练习，这次用字符到列表的不可变映射。"></a>重复前一个练习，这次用字符到列表的不可变映射。</h2><figure class="highlight scala"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> collection.immutable.<span class="type">HashMap</span></div><div class="line"><span class="keyword">import</span> collection.mutable.<span class="type">ListBuffer</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">indexs</span></span>(str:<span class="type">String</span>):<span class="type">Map</span>[<span class="type">Char</span>,<span class="type">ListBuffer</span>[<span class="type">Int</span>]]=&#123;</div><div class="line">  <span class="keyword">var</span> map = <span class="keyword">new</span> <span class="type">HashMap</span>[<span class="type">Char</span>, <span class="type">ListBuffer</span>[<span class="type">Int</span>]]()</div><div class="line">  <span class="keyword">var</span> i = <span class="number">0</span></div><div class="line">  str.foreach&#123;</div><div class="line">    c=&gt;</div><div class="line">      map.get(c) <span class="keyword">match</span>&#123;</div><div class="line">        <span class="keyword">case</span> <span class="type">Some</span>(result) =&gt; result += i</div><div class="line">        <span class="keyword">case</span> <span class="type">None</span> =&gt; map += (c-&gt; <span class="type">ListBuffer</span>&#123;i&#125;)</div><div class="line">      &#125;</div><div class="line">      i += <span class="number">1</span></div><div class="line">  &#125;</div><div class="line">  map</div><div class="line">&#125;</div><div class="line"></div><div class="line">println(indexs(<span class="string">"Mississippi"</span>))</div></pre></td></tr></table></figure></div><p class="readmore"><a href="/2013/03/15/scala_exercises_13.html">阅读更多</a></p></div><nav class="page-navigator"><a class="extend prev" rel="prev" href="/page/9/">上一页</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/8/">8</a><a class="page-number" href="/page/9/">9</a><span class="page-number current">10</span><a class="page-number" href="/page/11/">11</a><a class="page-number" href="/page/12/">12</a><a class="extend next" rel="next" href="/page/11/">下一页</a></nav></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank" class="search-form"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="https://ivaneye.com"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/architecture/">architecture</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/book/">book</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/clojure/">clojure</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/code/">code</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/consensus/">consensus</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/designpattern/">designpattern</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/docker/">docker</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/golang/">golang</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/how/">how</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/io/">io</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/jdk/">jdk</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/junit3/">junit3</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/junit4/">junit4</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/jvm/">jvm</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/lighttable/">lighttable</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/luminus/">luminus</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/module/">module</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/mycode/">mycode</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/other/">other</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/scala/">scala</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/think/">think</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/thread/">thread</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/train/">train</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/why/">why</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/xmind/">xmind</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/zookeeper/">zookeeper</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/jvm/" style="font-size: 15px;">jvm</a> <a href="/tags/book/" style="font-size: 15px;">book</a> <a href="/tags/other/" style="font-size: 15px;">other</a> <a href="/tags/随笔/" style="font-size: 15px;">随笔</a> <a href="/tags/review/" style="font-size: 15px;">review</a> <a href="/tags/read/" style="font-size: 15px;">read</a> <a href="/tags/think/" style="font-size: 15px;">think</a> <a href="/tags/concept/" style="font-size: 15px;">concept</a> <a href="/tags/architecture/" style="font-size: 15px;">architecture</a> <a href="/tags/designpattern/" style="font-size: 15px;">designpattern</a> <a href="/tags/java/" style="font-size: 15px;">java</a> <a href="/tags/clojure/" style="font-size: 15px;">clojure</a> <a href="/tags/osgi/" style="font-size: 15px;">osgi</a> <a href="/tags/proxy/" style="font-size: 15px;">proxy</a> <a href="/tags/docker/" style="font-size: 15px;">docker</a> <a href="/tags/golang/" style="font-size: 15px;">golang</a> <a href="/tags/language/" style="font-size: 15px;">language</a> <a href="/tags/graphviz/" style="font-size: 15px;">graphviz</a> <a href="/tags/cdraw/" style="font-size: 15px;">cdraw</a> <a href="/tags/framework/" style="font-size: 15px;">framework</a> <a href="/tags/luminus/" style="font-size: 15px;">luminus</a> <a href="/tags/xmind/" style="font-size: 15px;">xmind</a> <a href="/tags/transactional/" style="font-size: 15px;">transactional</a> <a href="/tags/index/" style="font-size: 15px;">index</a> <a href="/tags/thread/" style="font-size: 15px;">thread</a> <a href="/tags/scala/" style="font-size: 15px;">scala</a> <a href="/tags/opensource/" style="font-size: 15px;">opensource</a> <a href="/tags/jdk/" style="font-size: 15px;">jdk</a> <a href="/tags/junit3/" style="font-size: 15px;">junit3</a> <a href="/tags/junit4/" style="font-size: 15px;">junit4</a> <a href="/tags/lighttable/" style="font-size: 15px;">lighttable</a> <a href="/tags/theme/" style="font-size: 15px;">theme</a> <a href="/tags/how/" style="font-size: 15px;">how</a> <a href="/tags/io/" style="font-size: 15px;">io</a> <a href="/tags/reactor/" style="font-size: 15px;">reactor</a> <a href="/tags/classloader/" style="font-size: 15px;">classloader</a> <a href="/tags/tomcat/" style="font-size: 15px;">tomcat</a> <a href="/tags/jigsaw/" style="font-size: 15px;">jigsaw</a> <a href="/tags/module/" style="font-size: 15px;">module</a> <a href="/tags/why/" style="font-size: 15px;">why</a> <a href="/tags/zookeeper/" style="font-size: 15px;">zookeeper</a> <a href="/tags/consensus/" style="font-size: 15px;">consensus</a> <a href="/tags/paxos/" style="font-size: 15px;">paxos</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2016/12/18/iwant.html">散弹枪知识与狙击枪知识</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/29/philosophy.html">哲学是个什么鬼?</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/27/lunch.html">巴菲特午餐</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/21/cost.html">为时间买单</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/19/nas.html">Mybooklive修复</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/13/vote.html">李狗嗨与美国大选</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/06/learn.html">如何高效学习</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/01/machine.html">与机器赛跑</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/30/salary.html">平均薪酬×××，你拖后腿了吗？</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/20/zhihulive.html">评李笑来的知乎live</a></li></ul></div><div class="widget"><div class="comments-title"><i class="fa fa-comment-o"> 最近评论</i></div><div data-num-items="5" data-show-avatars="0" data-show-time="1" data-show-admin="0" data-excerpt-length="32" data-show-title="1" class="ds-recent-comments"></div></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="null" title="null" target="_blank"></a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">© <a href="/." rel="nofollow">思考，执行，表达！.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="/css/jquery.fancybox.css?v=0.0.0"><script>var duoshuoQuery = {short_name:'ivanpig'};
(function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0]
        || document.getElementsByTagName('body')[0]).appendChild(ds);
})();
</script><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>